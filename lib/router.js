"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ApiRouter=exports.getRouteParams=void 0;const errors_1=require("./errors"),http_1=require("./http"),utils_1=require("./utils");function getRouteParams(t,e){const r=utils_1.getPathKeys(t),s=utils_1.getPathValues(t,e);if(r&&s){const t={};for(let e=0;e<r.length;e++){const o=r[e],i=s[e];t[o]=i}return t}}exports.getRouteParams=getRouteParams;class ApiRouter{constructor(t){this.options=t,this._routes=[],this._middlewares=[]}use(t){if("function"!=typeof t)throw new errors_1.MiddlewareError;return this._middlewares.push(t),this}get(t,e){return this.addRoute(t,http_1.HttpMethod.GET,e),this}post(t,e){return this.addRoute(t,http_1.HttpMethod.POST,e),this}put(t,e){return this.addRoute(t,http_1.HttpMethod.PUT,e),this}patch(t,e){return this.addRoute(t,http_1.HttpMethod.PATCH,e),this}delete(t,e){return this.addRoute(t,http_1.HttpMethod.DELETE,e),this}routes(){return this._routes}middlewares(){return this._middlewares}createRoute(t){var e,r;let s=t;return(null===(e=this.options)||void 0===e?void 0:e.version)&&(s=`${this.options.version}${s}`),(null===(r=this.options)||void 0===r?void 0:r.basePath)&&(s=`${this.options.basePath}${s}`),utils_1.normalizePath(s)}addRoute(t,e,r){this._routes.push({path:this.createRoute(t),method:e,handler:r})}}exports.ApiRouter=ApiRouter;