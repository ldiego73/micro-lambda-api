"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ApiRouter=exports.instanceOfRoute=exports.getRouteParams=void 0;const errors_1=require("./errors"),http_1=require("./http"),utils_1=require("./utils");function getRouteParams(t,e){const s=utils_1.getPathKeys(t),o=utils_1.getPathValues(t,e);if(s&&o){const t={};for(let e=0;e<s.length;e++){const r=s[e],i=o[e];t[r]=i}return t}}exports.getRouteParams=getRouteParams;const instanceOfRoute=t=>"path"in t&&"method"in t;exports.instanceOfRoute=instanceOfRoute;class ApiRouter{constructor(t){this._options=t,this._routes=[],this._middlewares=[]}use(t){if("function"!=typeof t)throw new errors_1.MiddlewareError;return this._middlewares.push(t),this}options(t,e){return this.addRoute(t,http_1.HttpMethod.OPTIONS,e),this}get(t,e){return this.addRoute(t,http_1.HttpMethod.GET,e),this}post(t,e){return this.addRoute(t,http_1.HttpMethod.POST,e),this}put(t,e){return this.addRoute(t,http_1.HttpMethod.PUT,e),this}patch(t,e){return this.addRoute(t,http_1.HttpMethod.PATCH,e),this}delete(t,e){return this.addRoute(t,http_1.HttpMethod.DELETE,e),this}routes(){return this._routes}middlewares(){return this._middlewares}createRoute(t){var e,s;let o=t;return(null===(e=this._options)||void 0===e?void 0:e.version)&&(o=`${this._options.version}${o}`),(null===(s=this._options)||void 0===s?void 0:s.basePath)&&(o=`${this._options.basePath}${o}`),utils_1.normalizePath(o)}addRoute(t,e,s){this._routes.push({path:this.createRoute(t),method:e,handler:s})}}exports.ApiRouter=ApiRouter;